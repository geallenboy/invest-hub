
**viemï¼ˆåº•å±‚å®¢æˆ·ç«¯ï¼‰ â†’ wagmiï¼ˆReact hooks çŠ¶æ€å±‚ï¼‰ â†’ RainbowKitï¼ˆé’±åŒ… UI ç»„ä»¶ï¼‰**ã€‚
å®ƒä»¬è§£å†³äº†â€œå¦‚ä½•åœ¨ React/Next.js é‡Œä¼˜é›…ã€ç¨³å®šã€å¯ç»´æŠ¤åœ°åšé“¾ä¸Šäº¤äº’ä¸é’±åŒ…è¿æ¥â€çš„å…¨æµç¨‹é—®é¢˜ã€‚

---

# 1) viem æ˜¯ä»€ä¹ˆï¼Ÿ

**å®šä½ï¼š** ç°ä»£ã€ç±»å‹å®‰å…¨çš„ EVM å®¢æˆ·ç«¯ï¼ˆTypeScript-firstï¼‰ï¼Œå¯åœ¨æµè§ˆå™¨å’Œ Node ä¸­ä½¿ç”¨ã€‚
**ä½œç”¨ï¼š** ç›´æ¥è¯»å†™é“¾ä¸Šæ•°æ®ã€ç¼–ç /è§£ç  ABIã€å‘äº¤æ˜“ã€äº‹ä»¶æ—¥å¿—è§£æç­‰ã€‚
**ä¸ºä»€ä¹ˆç”¨ï¼š**

* **ç±»å‹å®‰å…¨**ï¼šABI â†’ è‡ªåŠ¨æ¨å¯¼å‡½æ•°/å‚æ•°/è¿”å›å€¼ç±»å‹ï¼Œå¼€å‘æœŸé˜²é”™ä¼˜äºä¼ ç»Ÿ `ethers.js/web3.js`ã€‚
* **è½»é‡å¿«é€Ÿ**ï¼šæŒ‰éœ€å¼•å…¥ã€æ ‘æ‘‡ä¼˜åŒ–å¥½ã€åºåˆ—åŒ–é€Ÿåº¦å¿«ã€‚
* **ç¯å¢ƒå‹å¥½**ï¼šæµè§ˆå™¨/SSR/Node éƒ½èƒ½ç”¨ï¼›åŒæ—¶æ”¯æŒ EIP-1193 provider ä¸è‡ªå»º RPCã€‚
* **å¯ç‹¬ç«‹ä½¿ç”¨**ï¼šä¸ä¾èµ– Reactï¼›è„šæœ¬ã€æœåŠ¡ç«¯ä»»åŠ¡ä¹Ÿèƒ½ç›´æ¥ç”¨ viemã€‚

**è§£å†³çš„é—®é¢˜ï¼š**

* ABI æ‰‹å†™æ˜“é”™ã€è¿”å›å€¼ any â†’ ç”¨ viem å˜æˆâ€œå¼ºç±»å‹è°ƒç”¨â€ã€‚
* äº‹ä»¶æ—¥å¿—è§£æã€ç¼–ç /è§£ç ç¹ç â†’ viem å†…ç½®å·¥å…·æ–¹æ³•ç»Ÿä¸€æå®šã€‚
* SSR/è„šæœ¬ç¯å¢ƒå®¹æ˜“è¸©å‘ â†’ viem çš„ client æ¨¡å¼æ›´æ¸…æ™°ï¼ˆ`publicClient`/`walletClient`ï¼‰ã€‚

---

# 2) wagmi æ˜¯ä»€ä¹ˆï¼Ÿ

**å®šä½ï¼š** åŸºäº viem çš„ **React hooks åº“**ï¼Œå¤„ç†â€œé’±åŒ…è¿æ¥ + é“¾ä¸Šè¯»å†™â€çš„çŠ¶æ€ç®¡ç†ã€‚
**ä½œç”¨ï¼š** `useAccount / useBalance / useReadContract / useWriteContract` ç­‰ï¼Œé…åˆ React Query åšç¼“å­˜ã€é‡è¯•ã€å¤±æ•ˆã€‚
**ä¸ºä»€ä¹ˆç”¨ï¼š**

* **çŠ¶æ€ç®¡ç†çœå¿ƒ**ï¼šè¿æ¥çŠ¶æ€ã€å½“å‰é“¾ã€è´¦æˆ·ã€ç¼“å­˜ã€è½®è¯¢ã€é”™è¯¯é‡è¯•ä¸€æ¡é¾™ã€‚
* **ä¸ Next.js/React 19 é€‚é…å¥½**ï¼šSSR/Hydration å‘å°‘ï¼Œå¯æ§ã€‚
* **å¤šé“¾é…ç½®ç®€å•**ï¼šä¼ å…¥ chains + transports å°±èƒ½å¥½äº†ã€‚

**è§£å†³çš„é—®é¢˜ï¼š**

* æ‰‹å†™ provider ç®¡ç†ã€è¿æ¥çŠ¶æ€åŒæ­¥ã€ç¼“å­˜ç­–ç•¥å¤æ‚ â†’ wagmi ç»Ÿä¸€å°è£…ã€‚
* å¤šä¸ªç»„ä»¶é—´å…±äº«â€œæ˜¯å¦å·²è¿æ¥/å½“å‰é“¾/ä½™é¢/æˆæƒâ€ â†’ hooks ä¸€å¤„è·å–ï¼Œè‡ªåŠ¨æ›´æ–°ã€‚
* å¼‚å¸¸ä¸ UXï¼šå¤±è´¥é‡è¯•ã€loading/error çŠ¶æ€æ ‡å‡†åŒ–ï¼Œå‡å°‘æ ·æ¿ä»£ç ã€‚

> å°ç»“ï¼š**viem è´Ÿè´£â€œæ€ä¹ˆè·Ÿé“¾è¯´è¯â€ï¼Œwagmi è´Ÿè´£â€œåœ¨ React é‡Œç®¡è¿™äº›çŠ¶æ€â€ã€‚**

---

# 3) RainbowKit æ˜¯ä»€ä¹ˆï¼Ÿ

**å®šä½ï¼š** åŸºäº wagmi çš„ **é’±åŒ…è¿æ¥ UI ç»„ä»¶åº“**ï¼ˆæ¨¡æ€æ¡†ã€é€‰æ‹©é’±åŒ…ã€åˆ‡æ¢ç½‘ç»œã€å¤´åƒ/ENS å±•ç¤ºç­‰ï¼‰ã€‚
**ä½œç”¨ï¼š** ä¸€è¡Œ `<ConnectButton />` å°±æœ‰æ˜“ç”¨ã€ç¾è§‚çš„è¿æ¥ä½“éªŒï¼Œæ”¯æŒ WalletConnectã€æ³¨å…¥é’±åŒ…ç­‰ã€‚
**ä¸ºä»€ä¹ˆç”¨ï¼š**

* **UI & UX ç°æˆ**ï¼šæ— éœ€è‡ªå·±åšâ€œé€‰æ‹©é’±åŒ…/åˆ‡é“¾/è´¦æˆ·èœå•â€çš„ç¹çç•Œé¢é€»è¾‘ã€‚
* **ç”Ÿæ€å¹¿**ï¼šå¼€ç®±æ”¯æŒå¸¸è§é’±åŒ…ï¼Œé…åˆ WalletConnect çš„ `projectId` æ”¯æŒç§»åŠ¨ç«¯æ‰«ç ã€‚
* **å¯å®šåˆ¶**ï¼šä¸»é¢˜ã€è¯­è¨€ï¼ˆä¸­æ–‡ï¼‰ã€åˆå§‹é“¾ã€æ¨¡æ€å¤§å°éƒ½èƒ½é…ã€‚

**è§£å†³çš„é—®é¢˜ï¼š**

* â€œè¿æ¥é’±åŒ…â€æ¶‰åŠå¤§é‡è¾¹ç•Œï¼šæœªå®‰è£…é’±åŒ…ã€ç§»åŠ¨ç«¯è·³è½¬ã€åˆ‡é“¾æç¤ºã€é”™è¯¯æç¤º â†’ äº¤ç»™ RainbowKitã€‚
* è§†è§‰è§„èŒƒä¸å¯è®¿é—®æ€§ â†’ å®˜æ–¹ç»´æŠ¤ã€äº¤äº’ä¸€è‡´ã€‚

---

## å®ƒä»¬å¦‚ä½•ååŒå·¥ä½œï¼Ÿ

1. **viem**ï¼šæä¾› **RPC å®¢æˆ·ç«¯**ï¼ˆ`publicClient` è¯»é“¾ã€`walletClient` å‘äº¤æ˜“ï¼‰ï¼Œè´Ÿè´£åº•å±‚é€šä¿¡ä¸ ABI ç±»å‹å®‰å…¨ã€‚
2. **wagmi**ï¼šåŸºäº viem å°è£…æˆ **React hooks**ï¼Œç®¡ç†è¿æ¥çŠ¶æ€ã€ç¼“å­˜ä¸é”™è¯¯é‡è¯•ã€‚
3. **RainbowKit**ï¼šåŸºäº wagmi æä¾› **è¿æ¥é’±åŒ… UI**ï¼Œè®©ç”¨æˆ·é€‰æ‹©/åˆ‡æ¢é’±åŒ…ä¸ç½‘ç»œã€‚

> å¿ƒæ™ºæ¨¡å‹ï¼š**RainbowKitï¼ˆUIï¼‰ â† wagmiï¼ˆçŠ¶æ€ï¼‰ â† viemï¼ˆé“¾äº¤äº’ï¼‰**

---

## è¿™å¥—ç»„åˆåœ¨é¡¹ç›®é‡Œå…·ä½“â€œæ›¿ä½ çœæ‰â€çš„æ´»

* âœ… ï¼ˆUIï¼‰é’±åŒ…é€‰æ‹©/è¿æ¥/åˆ‡æ¢ç½‘ç»œ/è´¦æˆ·èœå•/ENS å±•ç¤º
* âœ… ï¼ˆçŠ¶æ€ï¼‰æ˜¯å¦å·²è¿æ¥/å½“å‰é“¾/åœ°å€/ä½™é¢çš„è®¢é˜…ä¸ç¼“å­˜
* âœ… ï¼ˆè°ƒç”¨ï¼‰è¯»åˆçº¦/å†™åˆçº¦çš„ç±»å‹æ ¡éªŒã€å‚æ•°æ¨å¯¼ã€é”™è¯¯æ•è·
* âœ… ï¼ˆå¤šé“¾ï¼‰åŒä¸€å¥—ä»£ç è·‘ä¸»ç½‘ã€L2ï¼ˆBase/Arbitrum/OPï¼‰ä¸æµ‹è¯•ç½‘
* âœ… ï¼ˆSSRï¼‰Next.js ä¸‹çš„æ°´åˆä¸æ•°æ®è·å–ç­–ç•¥ï¼ˆé…åˆ React Queryï¼‰
* âœ… ï¼ˆæ€§èƒ½ï¼‰æŒ‰éœ€å¼•å…¥ã€æœ€å°åŒ–æ‰“åŒ…ä½“ç§¯ã€ç¨³å®šçš„é‡è¯•ä¸ç¼“å­˜å¤±æ•ˆ

ç›¸è¾ƒâ€œæ‰‹æ“ ethers.js + è‡ªå·±å†™è¿æ¥å™¨ + è‡ªå·±åš UIâ€ï¼Œèƒ½æ˜¾è‘—å‡å°‘æ ·æ¿ä»£ç ä¸å‘ä½ã€‚

---

## ä»€ä¹ˆæ—¶å€™ä¸ä¸€å®šè¦ç”¨å®ƒä»¬ï¼Ÿ

* **é React æŠ€æœ¯æ ˆ**ï¼šæ¯”å¦‚ Vue/Svelte â†’ wagmi/RainbowKit å¹¶ä¸é€‚é…ï¼›åªç”¨ **viem** æˆ–æ‰¾å¯¹åº”ç”Ÿæ€åº“ã€‚
* **é EVM é“¾**ï¼šå¦‚ Solanaã€Aptos â†’ æ¢ç”¨ç›¸åº”å®¢æˆ·ç«¯ä¸è¿æ¥åº“ã€‚
* **çº¯åç«¯è„šæœ¬/æ•°æ®ç®¡é“**ï¼šæ— éœ€ Reactï¼Œç›´æ¥åªç”¨ **viem**ï¼ˆæ›´è½»æ›´å¹²å‡€ï¼‰ã€‚

---

## ç®€çŸ­ç¤ºä¾‹ï¼ˆå¸®åŠ©ä½ å»ºç«‹ç›´è§‰ï¼‰

**è¯»ä½™é¢ï¼ˆwagmi + viemï¼‰**

```tsx
import { useAccount, useBalance } from "wagmi";

export function Balance() {
  const { address } = useAccount();
  const { data, isLoading } = useBalance({ address, query: { enabled: !!address }});
  if (!address) return <button>è¯·å…ˆè¿æ¥</button>;
  if (isLoading) return <p>è¯»å–ä¸­...</p>;
  return <p>{data?.formatted} {data?.symbol}</p>;
}
```

**è¿æ¥æŒ‰é’®ï¼ˆRainbowKitï¼‰**

```tsx
import { ConnectButton } from "@rainbow-me/rainbowkit";

export default function Connect() {
  return <ConnectButton chainStatus="icon" accountStatus="address" showBalance={false} />;
}
```

**åº•å±‚é…ç½®ï¼ˆç®€åŒ–ç‰ˆï¼‰**

```ts
import { getDefaultConfig } from "@rainbow-me/rainbowkit";
import { http } from "wagmi";
import { mainnet, base, arbitrum, optimism, sepolia } from "wagmi/chains";

export const config = getDefaultConfig({
  appName: "invest-hub",
  projectId: process.env.NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID!,
  chains: [mainnet, base, arbitrum, optimism, sepolia],
  transports: { [mainnet.id]: http(), [base.id]: http(), [arbitrum.id]: http(), [optimism.id]: http(), [sepolia.id]: http() },
  ssr: true,
});
```

---

## å¸¸è§å‘ä½ä¸å°è´´å£«

* **WalletConnect `projectId` å¿…é…**ï¼šå¦åˆ™ç§»åŠ¨ç«¯è¿æ¥å®¹æ˜“å¤±è´¥ã€‚
* **Next.js SSR æ°´åˆè­¦å‘Š**ï¼šæŠŠä½¿ç”¨ wagmi çš„ç»„ä»¶æ”¾åœ¨ `\"use client\"` ç¯å¢ƒï¼›`Providers` åŒ…è£¹åœ¨ `app/layout.tsx` çš„ `body` å†…ã€‚
* **å¤šé“¾ RPC é€Ÿç‡é™åˆ¶**ï¼šç”Ÿäº§å»ºè®®ä½¿ç”¨ Alchemy/Infura/è‡ªå»ºèŠ‚ç‚¹æé«˜ç¨³å®šæ€§ã€‚
* **å†™åˆçº¦å‰å…ˆ read**ï¼šç¡®è®¤å‚æ•°/ä½™é¢/æˆæƒï¼Œå† `useWriteContract`ã€‚
* **æˆæƒ/Allowance**ï¼šåšäº¤æ˜“å‰æ£€æŸ¥å¹¶æç¤ºæˆæƒï¼Œå†™å…¥åå¯å¼•å¯¼ç”¨æˆ·æ’¤é”€ï¼ˆé£æ§ï¼‰ã€‚
* **ç±»å‹å®‰å…¨**ï¼šå°†åˆçº¦ ABI å®šä¹‰ä¸º `as const`ï¼Œè®© viem å®Œæ•´æ¨å¯¼ç±»å‹ã€‚

---

### ä¸€å¥è¯æ€»ç»“

* **viem**ï¼šé è°±çš„â€œé“¾ä¸Š SDKâ€ï¼ˆç±»å‹å®‰å…¨ã€å¿«ï¼‰ã€‚
* **wagmi**ï¼šå¥½ç”¨çš„â€œReact é“¾ä¸ŠçŠ¶æ€å±‚â€ã€‚
* **RainbowKit**ï¼šç°æˆçš„â€œé’±åŒ…è¿æ¥ UI å¥—ä»¶â€ã€‚

åˆèµ·æ¥èƒ½è®©ä½ çš„ **Next.js Web3 åº”ç”¨å¿«é€Ÿæˆå‹**ï¼ŒåŒæ—¶ä¿æŒ**ç±»å‹å®‰å…¨ã€å¯ç»´æŠ¤å’Œå¥½ä½“éªŒ**ã€‚

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥æŠŠæˆ‘ä»¬åˆšæ‰çš„è„šæ‰‹æ¶å†åŠ ä¸¤å—ç¤ºä¾‹ï¼š

* ğŸŸ¦ **â€œè¯»å†™åˆçº¦â€æ¼”ç¤ºå¡ç‰‡**ï¼ˆå« approve + swap çš„æœ€å°æµç¨‹ç¤ºæ„ï¼‰
* ğŸ›¡ï¸ **â€œæˆæƒæ£€æŸ¥â€å¡ç‰‡**ï¼ˆåˆ—å‡ºæŸåœ°å€çš„ ERC-20 allowanceï¼‰
  è¯´ä¸€å£°ä½ æ›´æƒ³å…ˆä¸Šå“ªå—ï¼Œæˆ‘ç›´æ¥ç»™åˆ°å¯å¤åˆ¶çš„ç»„ä»¶ä»£ç ã€‚
